{
  "pv": {
    "name": "Claude Code Action Architecture",
    "version": "1.0.0"
  },
  "nodes": [
    {"id": "github-event", "type": "text", "text": "GitHub Event", "x": 100, "y": 100, "width": 200, "height": 100, "pv": {"nodeType": "external-service", "name": "GitHub Event", "description": "Webhook trigger (issues, PR, comments, etc.)"}},
    {"id": "prepare-step", "type": "text", "text": "Prepare Step", "x": 100, "y": 250, "width": 200, "height": 100, "pv": {"nodeType": "entrypoint", "name": "Prepare Step", "description": "Parse context, setup auth, validate, fetch data"}},
    {"id": "authentication", "type": "text", "text": "Authentication", "x": 50, "y": 400, "width": 150, "height": 80, "pv": {"nodeType": "authentication", "name": "Authentication", "description": "OIDC token exchange"}},
    {"id": "context-parser", "type": "text", "text": "Context Parser", "x": 200, "y": 400, "width": 150, "height": 80, "pv": {"nodeType": "github-integration", "name": "Context Parser", "description": "Parse GitHub event context"}},
    {"id": "validation", "type": "text", "text": "Validation", "x": 350, "y": 400, "width": 150, "height": 80, "pv": {"nodeType": "validation", "name": "Validation", "description": "Permissions, triggers, actors"}},
    {"id": "mode-detection", "type": "text", "text": "Mode Detection", "x": 500, "y": 400, "width": 150, "height": 80, "pv": {"nodeType": "mode-system", "name": "Mode Detection", "description": "Detect Tag vs Agent mode"}},
    {"id": "data-fetcher", "type": "text", "text": "Data Fetcher", "x": 650, "y": 400, "width": 150, "height": 80, "pv": {"nodeType": "github-integration", "name": "Data Fetcher", "description": "Fetch PR/issue/comments via GraphQL"}},
    {"id": "data-formatter", "type": "text", "text": "Data Formatter", "x": 800, "y": 400, "width": 150, "height": 80, "pv": {"nodeType": "github-integration", "name": "Data Formatter", "description": "Format data for Claude"}},
    {"id": "tag-mode", "type": "text", "text": "Tag Mode", "x": 400, "y": 550, "width": 150, "height": 80, "pv": {"nodeType": "mode-system", "name": "Tag Mode", "description": "@claude mention mode with tracking"}},
    {"id": "agent-mode", "type": "text", "text": "Agent Mode", "x": 600, "y": 550, "width": 150, "height": 80, "pv": {"nodeType": "mode-system", "name": "Agent Mode", "description": "Direct automation mode"}},
    {"id": "branch-manager", "type": "text", "text": "Branch Manager", "x": 200, "y": 700, "width": 150, "height": 80, "pv": {"nodeType": "operations", "name": "Branch Manager", "description": "Create/checkout branches"}},
    {"id": "comment-manager", "type": "text", "text": "Comment Manager", "x": 400, "y": 700, "width": 150, "height": 80, "pv": {"nodeType": "operations", "name": "Comment Manager", "description": "Create/update tracking comments"}},
    {"id": "prompt-generation", "type": "text", "text": "Prompt Generation", "x": 500, "y": 850, "width": 200, "height": 100, "pv": {"nodeType": "prompt-generation", "name": "Prompt Generation", "description": "Generate Claude prompt with context"}},
    {"id": "mcp-config", "type": "text", "text": "MCP Config Setup", "x": 500, "y": 1000, "width": 200, "height": 80, "pv": {"nodeType": "mcp-server", "name": "MCP Config Setup", "description": "Configure MCP servers"}},
    {"id": "mcp-comment-server", "type": "text", "text": "Comment Server", "x": 250, "y": 1150, "width": 180, "height": 80, "pv": {"nodeType": "mcp-server", "name": "Comment Server", "description": "Update tracking comments"}},
    {"id": "mcp-file-ops-server", "type": "text", "text": "File Ops Server", "x": 450, "y": 1150, "width": 180, "height": 80, "pv": {"nodeType": "mcp-server", "name": "File Ops Server", "description": "API-based file commits"}},
    {"id": "mcp-inline-comment-server", "type": "text", "text": "Inline Comment Server", "x": 650, "y": 1150, "width": 200, "height": 80, "pv": {"nodeType": "mcp-server", "name": "Inline Comment Server", "description": "PR review comments"}},
    {"id": "claude-execution", "type": "text", "text": "Claude Code Execution", "x": 500, "y": 1300, "width": 200, "height": 100, "pv": {"nodeType": "claude-execution", "name": "Claude Code Execution", "description": "Execute Claude Code CLI"}},
    {"id": "claude-api", "type": "text", "text": "Claude API", "x": 750, "y": 1300, "width": 180, "height": 100, "pv": {"nodeType": "external-service", "name": "Claude API", "description": "Anthropic/Bedrock/Vertex/Foundry"}},
    {"id": "github-api", "type": "text", "text": "GitHub API", "x": 750, "y": 700, "width": 180, "height": 100, "pv": {"nodeType": "external-service", "name": "GitHub API", "description": "REST & GraphQL API"}},
    {"id": "update-comment", "type": "text", "text": "Update Comment", "x": 300, "y": 1450, "width": 180, "height": 80, "pv": {"nodeType": "entrypoint", "name": "Update Comment", "description": "Update tracking comment with results"}},
    {"id": "format-turns", "type": "text", "text": "Format Turns", "x": 500, "y": 1450, "width": 180, "height": 80, "pv": {"nodeType": "entrypoint", "name": "Format Turns", "description": "Format conversation for summary"}}
  ],
  "edges": [
    {"id": "e1", "fromNode": "github-event", "toNode": "prepare-step", "fromSide": "bottom", "toSide": "top", "label": "Trigger", "pv": {"edgeType": "control-flow"}},
    {"id": "e2", "fromNode": "prepare-step", "toNode": "authentication", "fromSide": "bottom", "toSide": "top", "label": "Setup auth", "pv": {"edgeType": "control-flow"}},
    {"id": "e3", "fromNode": "prepare-step", "toNode": "context-parser", "fromSide": "bottom", "toSide": "top", "label": "Parse event", "pv": {"edgeType": "data-flow"}},
    {"id": "e4", "fromNode": "prepare-step", "toNode": "validation", "fromSide": "bottom", "toSide": "top", "label": "Validate", "pv": {"edgeType": "control-flow"}},
    {"id": "e5", "fromNode": "prepare-step", "toNode": "mode-detection", "fromSide": "bottom", "toSide": "top", "label": "Detect mode", "pv": {"edgeType": "control-flow"}},
    {"id": "e6", "fromNode": "authentication", "toNode": "data-fetcher", "fromSide": "right", "toSide": "left", "label": "Auth token", "pv": {"edgeType": "data-flow"}},
    {"id": "e7", "fromNode": "context-parser", "toNode": "data-fetcher", "fromSide": "right", "toSide": "left", "label": "Context", "pv": {"edgeType": "data-flow"}},
    {"id": "e8", "fromNode": "mode-detection", "toNode": "tag-mode", "fromSide": "bottom", "toSide": "top", "label": "@claude detected", "pv": {"edgeType": "control-flow"}},
    {"id": "e9", "fromNode": "mode-detection", "toNode": "agent-mode", "fromSide": "bottom", "toSide": "top", "label": "Automation", "pv": {"edgeType": "control-flow"}},
    {"id": "e10", "fromNode": "data-fetcher", "toNode": "data-formatter", "fromSide": "right", "toSide": "left", "label": "Raw data", "pv": {"edgeType": "data-flow"}},
    {"id": "e11", "fromNode": "data-fetcher", "toNode": "github-api", "fromSide": "right", "toSide": "left", "label": "GraphQL queries", "pv": {"edgeType": "api-call"}},
    {"id": "e12", "fromNode": "tag-mode", "toNode": "branch-manager", "fromSide": "bottom", "toSide": "top", "label": "Setup branch", "pv": {"edgeType": "control-flow"}},
    {"id": "e13", "fromNode": "tag-mode", "toNode": "comment-manager", "fromSide": "bottom", "toSide": "top", "label": "Create tracking", "pv": {"edgeType": "control-flow"}},
    {"id": "e14", "fromNode": "branch-manager", "toNode": "github-api", "fromSide": "right", "toSide": "left", "label": "Branch ops", "pv": {"edgeType": "api-call"}},
    {"id": "e15", "fromNode": "comment-manager", "toNode": "github-api", "fromSide": "right", "toSide": "left", "label": "Comment CRUD", "pv": {"edgeType": "api-call"}},
    {"id": "e16", "fromNode": "tag-mode", "toNode": "prompt-generation", "fromSide": "bottom", "toSide": "top", "label": "Mode config", "pv": {"edgeType": "data-flow"}},
    {"id": "e17", "fromNode": "agent-mode", "toNode": "prompt-generation", "fromSide": "bottom", "toSide": "top", "label": "Mode config", "pv": {"edgeType": "data-flow"}},
    {"id": "e18", "fromNode": "data-formatter", "toNode": "prompt-generation", "fromSide": "bottom", "toSide": "top", "label": "Formatted data", "pv": {"edgeType": "data-flow"}},
    {"id": "e19", "fromNode": "prompt-generation", "toNode": "mcp-config", "fromSide": "bottom", "toSide": "top", "label": "Setup MCP", "pv": {"edgeType": "control-flow"}},
    {"id": "e20", "fromNode": "mcp-config", "toNode": "mcp-comment-server", "fromSide": "bottom", "toSide": "top", "label": "Configure", "pv": {"edgeType": "configuration"}},
    {"id": "e21", "fromNode": "mcp-config", "toNode": "mcp-file-ops-server", "fromSide": "bottom", "toSide": "top", "label": "Configure", "pv": {"edgeType": "configuration"}},
    {"id": "e22", "fromNode": "mcp-config", "toNode": "mcp-inline-comment-server", "fromSide": "bottom", "toSide": "top", "label": "Configure", "pv": {"edgeType": "configuration"}},
    {"id": "e23", "fromNode": "mcp-comment-server", "toNode": "claude-execution", "fromSide": "bottom", "toSide": "top", "label": "MCP tools", "pv": {"edgeType": "service-integration"}},
    {"id": "e24", "fromNode": "mcp-file-ops-server", "toNode": "claude-execution", "fromSide": "bottom", "toSide": "top", "label": "MCP tools", "pv": {"edgeType": "service-integration"}},
    {"id": "e25", "fromNode": "mcp-inline-comment-server", "toNode": "claude-execution", "fromSide": "bottom", "toSide": "top", "label": "MCP tools", "pv": {"edgeType": "service-integration"}},
    {"id": "e26", "fromNode": "prompt-generation", "toNode": "claude-execution", "fromSide": "bottom", "toSide": "top", "label": "Prompt", "pv": {"edgeType": "data-flow"}},
    {"id": "e27", "fromNode": "claude-execution", "toNode": "claude-api", "fromSide": "right", "toSide": "left", "label": "API calls", "pv": {"edgeType": "api-call"}},
    {"id": "e28", "fromNode": "mcp-comment-server", "toNode": "github-api", "fromSide": "right", "toSide": "bottom", "label": "Update comments", "pv": {"edgeType": "api-call"}},
    {"id": "e29", "fromNode": "mcp-file-ops-server", "toNode": "github-api", "fromSide": "right", "toSide": "bottom", "label": "Commit files", "pv": {"edgeType": "api-call"}},
    {"id": "e30", "fromNode": "mcp-inline-comment-server", "toNode": "github-api", "fromSide": "right", "toSide": "bottom", "label": "Review comments", "pv": {"edgeType": "api-call"}},
    {"id": "e31", "fromNode": "claude-execution", "toNode": "update-comment", "fromSide": "bottom", "toSide": "top", "label": "Complete", "pv": {"edgeType": "control-flow"}},
    {"id": "e32", "fromNode": "claude-execution", "toNode": "format-turns", "fromSide": "bottom", "toSide": "top", "label": "Complete", "pv": {"edgeType": "control-flow"}},
    {"id": "e33", "fromNode": "update-comment", "toNode": "github-api", "fromSide": "right", "toSide": "bottom", "label": "Final update", "pv": {"edgeType": "api-call"}}
  ]
}
